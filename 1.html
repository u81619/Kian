<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>حرق الملفات على الفلاش — Burner</title>
  <!-- خطوط من جوجل -->
  <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&family=El+Messiri:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b0b0f;--card:#0f1115;--accent:#ff6b00;--glow: 0 0 30px rgba(255,107,0,0.12)}
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:radial-gradient(circle at 10% 10%, #1b0b00 0%, #070609 40%, #000 100%);font-family:'El Messiri',system-ui,Arial;color:#e9e6e6;display:flex;align-items:center;justify-content:center;padding:32px}
    .wrap{width:980px;max-width:96%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:20px;padding:26px;box-shadow: 0 10px 40px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.03)}/* العنوان الناري */
.title{display:flex;align-items:center;gap:18px}
.logo{
  font-family:'Alfa Slab One', cursive;font-size:46px;letter-spacing:1px;color:var(--accent);position:relative;line-height:1
}
/* تأثير اللهب */
.logo{background:linear-gradient(90deg,#ffef8a 0%,#ff8a00 40%,#ff1e00 70%);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow: 0 2px 8px rgba(255,110,0,0.08)}
.logo::after{content:'';position:absolute;inset:auto -8px -6px 0;border-radius:50%;filter:blur(30px);opacity:.6;background:radial-gradient(ellipse at center,#ff8a00, transparent 40%);z-index:-1;transform:translateY(6px)}
.subtitle{color:#f4f4f4;opacity:.9;font-weight:700}

/* البطاقة */
.card{margin-top:18px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);display:grid;grid-template-columns:1fr 360px;gap:18px}
@media(max-width:880px){.card{grid-template-columns:1fr}}

/* منطقة الملفات */
.drop{min-height:230px;border:2px dashed rgba(255,255,255,0.04);border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px;gap:12px}
.drop.drag{background:linear-gradient(90deg, rgba(255,107,0,0.03), rgba(255,255,255,0.01));border-color:rgba(255,107,0,0.25)}
.drop input{display:none}
.btn{background:linear-gradient(90deg,var(--accent),#ff1e00);padding:10px 14px;border-radius:10px;border:none;color:#fff;font-weight:700;cursor:pointer;box-shadow:var(--glow)}
.ghost{opacity:.85}

/* لائحة الملفات */
.files{max-height:280px;overflow:auto;padding:8px;display:flex;flex-direction:column;gap:8px}
.file{display:flex;align-items:center;justify-content:space-between;padding:10px;border-radius:8px;background:rgba(255,255,255,0.02)}
.file .meta{display:flex;align-items:center;gap:10px}
.file .meta .name{font-weight:700}
.small{font-size:13px;color:#cfcfcf;opacity:.85}

/* الشريط الأيمن */
.side{padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));display:flex;flex-direction:column;gap:12px}
.progress{height:14px;background:rgba(255,255,255,0.03);border-radius:10px;overflow:hidden}
.progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#ff8a00,#ffd58a);transition:width .2s ease}

.log{background:rgba(0,0,0,0.2);padding:10px;border-radius:8px;min-height:70px;color:#fff;font-size:13px;overflow:auto}

/* زر النسخ */
.actions{display:flex;gap:12px;flex-wrap:wrap}

/* تأثير لهب متحرك خلف البطاقة */
.flame-bg{position:absolute;inset:auto 40px -60px;z-index:0;pointer-events:none;opacity:.12;filter:blur(40px)}
.footer{margin-top:12px;font-size:13px;color:#cfcfcf;opacity:.9}

/* تأثير وميض للشعار */
@keyframes flicker{0%{opacity:1;transform:translateY(0)}50%{opacity:.85;transform:translateY(-2px)}100%{opacity:1;transform:translateY(0)}}
.logo{animation:flicker 2.2s linear infinite}

  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">
      <div class="logo">Burner</div>
      <div>
        <div class="subtitle">حرق الملفات على الفلاش — واجهة احترافية</div>
        <div class="small">اختر ملفاتك ثم انسخها مباشرة إلى الفلاش أو نزّلها كأرشيف</div>
      </div>
    </div><div class="card" style="position:relative;z-index:2">
  <div>
    <div class="drop" id="drop">
      <div style="text-align:center">
        <div style="font-size:20px;font-weight:800;margin-bottom:6px">اسحب وأفلت الملفات هنا</div>
        <div class="small">أو اضغط الزر لاختيار الملفات</div>
      </div>
      <input id="fileInput" type="file" multiple />
      <div style="display:flex;gap:8px;margin-top:10px">
        <button class="btn" id="chooseBtn">اختر ملفات</button>
        <button class="btn ghost" id="clearBtn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff">مسح الكل</button>
      </div>
    </div>

    <div class="files" id="filesList" style="margin-top:12px"></div>
  </div>

  <aside class="side">
    <div>
      <div class="small">إجمالي الملفات</div>
      <div id="summary" style="font-weight:800;font-size:18px;margin-top:6px">0 ملف — 0 بايت</div>
    </div>

    <div>
      <div class="small">التقدم</div>
      <div class="progress"><i id="progBar"></i></div>
    </div>

    <div class="actions">
      <button class="btn" id="writeBtn">نسخ إلى الفلاش</button>
      <button class="btn" id="zipBtn" title="إنشاء ملف ZIP للتحميل">تحميل كأرشيف ZIP</button>
      <button class="btn ghost" id="helpBtn" style="background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff">تعليمات</button>
    </div>

    <div>
      <div class="small">سجل الأحداث</div>
      <div class="log" id="log"></div>
    </div>

  </aside>
</div>

<div class="footer">ملاحظة: لا يمتلك هذا الموقع صلاحية الوصول إلى الفلاش بدون موافقتك. عند الضغط على "نسخ إلى الفلاش" سيطلب المتصفح اختيار مجلد الفلاش (معتمد في متصفحات كروميوم).</div>

  </div>  <!-- مكتبة JSZip + FileSaver من CDN (لإنشاء ZIP عند الحاجة) -->  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>  <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>  <script>
    // عناصر
    const drop = document.getElementById('drop');
    const fileInput = document.getElementById('fileInput');
    const chooseBtn = document.getElementById('chooseBtn');
    const filesList = document.getElementById('filesList');
    const summary = document.getElementById('summary');
    const writeBtn = document.getElementById('writeBtn');
    const progBar = document.getElementById('progBar');
    const logEl = document.getElementById('log');
    const clearBtn = document.getElementById('clearBtn');
    const zipBtn = document.getElementById('zipBtn');
    const helpBtn = document.getElementById('helpBtn');

    let files = [];

    function log(msg){
      const time = new Date().toLocaleTimeString();
      logEl.innerHTML = `<div>[${time}] ${msg}</div>` + logEl.innerHTML;
    }

    function updateSummary(){
      const count = files.length;
      const total = files.reduce((s,f)=>s+f.size,0);
      summary.textContent = `${count} ملف — ${formatBytes(total)}`;
    }

    function formatBytes(bytes){
      if(bytes===0) return '0 بايت';
      const sizes = ['بايت','ك.بايت','ميجا','جيجا','تيرا'];
      const i = Math.floor(Math.log(bytes)/Math.log(1024));
      return (bytes/Math.pow(1024,i)).toFixed(i?2:0) + ' ' + sizes[i];
    }

    function renderFiles(){
      filesList.innerHTML = '';
      files.forEach((f,idx)=>{
        const el = document.createElement('div'); el.className='file';
        el.innerHTML = `<div class=\"meta\"><div style=\"width:40px;height:40px;border-radius:6px;background:rgba(255,255,255,0.03);display:flex;align-items:center;justify-content:center;font-weight:800\">${idx+1}</div><div style=\"min-width:120px\"><div class=\"name\">${escapeHtml(f.name)}</div><div class=\"small\">${formatBytes(f.size)}</div></div></div><div><button class=\"btn ghost\" data-idx=\"${idx}\">حذف</button></div>`;
        filesList.appendChild(el);
      });
      filesList.querySelectorAll('button[data-idx]').forEach(b=>b.addEventListener('click',e=>{
        const i = Number(e.currentTarget.dataset.idx);
        files.splice(i,1); renderFiles(); updateSummary(); log('تم حذف الملف');
      }));
    }

    function escapeHtml(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}

    // سحب وإفلات
    ['dragenter','dragover'].forEach(ev=>{
      drop.addEventListener(ev,e=>{e.preventDefault();drop.classList.add('drag')});
    });
    ['dragleave','drop'].forEach(ev=>{
      drop.addEventListener(ev,e=>{e.preventDefault();drop.classList.remove('drag')});
    });
    drop.addEventListener('drop',e=>{
      const list = Array.from(e.dataTransfer.files); addFiles(list);
    });

    chooseBtn.addEventListener('click',()=>fileInput.click());
    fileInput.addEventListener('change',e=>{addFiles(Array.from(e.target.files)); fileInput.value='';});

    clearBtn.addEventListener('click',()=>{files=[];renderFiles();updateSummary();log('تم مسح جميع الملفات')});

    function addFiles(list){
      // إزالة Dupes بنفس الاسم والحجم
      list.forEach(f=>{
        if(!files.some(x=>x.name===f.name && x.size===f.size)) files.push(f);
      });
      renderFiles(); updateSummary(); log('تم إضافة ' + list.length + ' ملف');
    }

    // وظيفة النسخ إلى الفلاش باستخدام File System Access API
    async function writeToFlash(){
      if(!files.length){alert('لا توجد ملفات للنسخ');return}
      if(!('showDirectoryPicker' in window)){
        alert('متصفحك لا يدعم "نسخ مباشر". يمكنك تنزيل الأرشيف ZIP بدلاً من ذلك.'); return;
      }

      try{
        log('يرجى اختيار مجلد الفلاش (اختر جذر الفلاشة)');
        const dirHandle = await window.showDirectoryPicker({mode:'readwrite'});
        let done = 0; const total = files.length;
        for(const f of files){
          progBar.style.width = `${Math.round((done/total)*100)}%`;
          log('إنشاء: ' + f.name);
          const fileHandle = await dirHandle.getFileHandle(f.name, {create:true});
          const writable = await fileHandle.createWritable();
          // نقرأ محتوى الملف كـ ArrayBuffer ثم نكتبه
          const ab = await f.arrayBuffer();
          await writable.write(ab);
          await writable.close();
          done++;
          progBar.style.width = `${Math.round((done/total)*100)}%`;
        }
        progBar.style.width = `100%`;
        log('اكتمل النسخ!');
        alert('تم نسخ الملفات إلى الفلاش بنجاح');
      }catch(err){
        console.error(err); log('خطأ: ' + (err.message||err)); alert('فشل أثناء النسخ: ' + (err.message||err));
      }
    }

    writeBtn.addEventListener('click',writeToFlash);

    // إنشاء ZIP للتحميل كحل احتياطي
    zipBtn.addEventListener('click',async ()=>{
      if(!files.length){alert('لا توجد ملفات لإنشاء ZIP');return}
      try{
        const zip = new JSZip();
        let done=0, total=files.length;
        for(const f of files){
          const ab = await f.arrayBuffer();
          zip.file(f.name, ab);
          done++; progBar.style.width = `${Math.round((done/total)*100)}%`;
        }
        const blob = await zip.generateAsync({type:'blob'}, (meta)=>{
          progBar.style.width = `${Math.round(meta.percent)}%`;
        });
        saveAs(blob, 'files-burner.zip');
        log('تم إنشاء ZIP وتنزيله');
      }catch(e){console.error(e);log('خطأ أثناء إنشاء ZIP');alert('فشل إنشاء ZIP: '+ (e.message||e));}
    });

    helpBtn.addEventListener('click',()=>{
      alert(`تعليمات سريعة:\n\n1) اختر أو اسحب الملفات إلى المنطقة اليسرى.\n2) اضغط "نسخ إلى الفلاش" وسيطلب المتصفح اختيار مجلد الفلاش (اختر الجذر).\n3) إذا لم يدعم متصفحك الوصول للمجلد، استخدم زر "تحميل كأرشيف ZIP" لتنزيل الملفات ثم انسخها يدوياً إلى الفلاش.\n\nملاحظة: وظيفة "نسخ إلى الفلاش" تعمل في متصفحات كروميوم الحديثة (Chrome, Edge) فقط.`);
    });

    // تهيئة
    log('جاهز — أضف ملفاتك ابدأ الآن');
  </script></body>
</html>
